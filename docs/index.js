(()=>{"use strict";const e=document.querySelector(".header_search-form"),t=document.querySelector(".header__search-input"),n=document.querySelector(".header__location-name"),a=document.querySelector(".main__current-weather-additional-wind"),c=document.querySelector(".main__current-weather-additional-pressure"),r=document.querySelector(".main__current-weather-additional-humidity"),o=document.querySelector(".main__current-weather-temperature"),d=document.querySelector(".main__current-weather-icon"),s=document.querySelector(".main__current-weather-description"),i=document.querySelector(".main__current-weather-feels-like"),u=document.querySelector(".additional-info-block");async function m(e){const t=await async function(e){const t=await fetch(`https://api.weatherapi.com/v1/forecast.json?key=4f889e1d89284a96bd475947232311&q=${e}&days=3`,{mode:"cors"});return!!t.ok&&await t.json()}(e);t&&function(e){u.innerHTML="";const t={location:e.location.name,windSpeed:e.current.wind_kph,windDir:e.current.wind_dir,pressure:e.current.pressure_mb,humidity:e.current.humidity,temperature:e.current.temp_c,weatherIcon:e.current.condition.icon,weatherCondition:e.current.condition.text,temperatureFeelsLike:e.current.feelslike_c},m=e.forecast.forecastday;(function(e){n.textContent=e.location,a.textContent=e.windSpeed.toFixed(0)+" km/h, "+e.windDir,c.textContent=e.pressure+" mb",r.textContent=e.humidity+"%",o.textContent=e.temperature.toFixed(0)+"째",d.src=e.weatherIcon,s.textContent=e.weatherCondition,i.textContent="Feels like "+e.temperatureFeelsLike.toFixed(0)+"째"})(t),function(e){const t=document.createElement("div");t.classList.add("today-hourly-forecast-block");const n=function(e){const t=(new Date).getHours();if(23-t==0)return e[1].hour;const n=e[0].hour.slice(t+1);for(let a=0;a<t+1;a++)n.push(e[1].hour[a]);return n}(e);for(let e=0;e<24;e++)t.append(l(n[e]));u.append(t)}(m),function(e){for(let t=0;t<e.length;t++){const n=e[t].date,a=e[t].day.maxwind_kph.toFixed(0),c=e[t].day.condition.icon,r=e[t].day.maxtemp_c.toFixed(0),o=e[t].day.mintemp_c.toFixed(0);u.append(p(n,a,c,r,o))}}(m.slice(1))}(t)}function l(e){const t=document.createElement("div");t.classList.add("hour-forecast-block");const n=document.createElement("span");n.classList.add("hour-forecast-time"),n.textContent=e.time.slice(-5);const a=_(e.condition.icon,"main__current-weather-icon"),c=document.createElement("span");return c.classList.add("hour-forecast-temperature"),c.textContent=e.temp_c.toFixed(0),t.append(n),t.append(a),t.append(c),t}function p(e,t,n,a,c){const r=document.createElement("div");return r.classList.add("next-day-forecast-block"),r.append(function(e){const t=new Date(e),n=document.createElement("div");n.classList.add("next-day-forecast__date-block");const a=document.createElement("span");a.classList.add("next-day-forecast__date"),a.textContent=`${["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()]}, ${t.getDate()}`;const c=document.createElement("span");return c.classList.add("next-day-forecast__day"),c.textContent=`${["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][t.getDay()]}`,n.append(a),n.append(c),n}(e)),r.append(function(e,t,n,a){const c=document.createElement("div");return c.classList.add("next-day-forecast__details-block"),c.append(function(e){const t=document.createElement("div");t.classList.add("next-day-forecast__wind-block");const n=y("Wind"),a=document.createElement("span");return a.classList.add("next-day-forecast__wind-speed"),a.textContent=e+" km/h",t.append(n),t.append(a),t}(e)),c.append(_(t,"next-day-forecast__image")),c.append(function(e){const t=document.createElement("div");t.classList.add("next-day-forecast__day-temp-block");const n=y("Day"),a=document.createElement("span");return a.classList.add("next-day-forecast__day-temp"),a.textContent=e+"째",t.append(n),t.append(a),t}(n)),c.append(function(e){const t=document.createElement("div");t.classList.add("next-day-forecast__night-temp-block");const n=y("Night"),a=document.createElement("span");return a.classList.add("next-day-forecast__night-temp"),a.textContent=e+"째",t.append(n),t.append(a),t}(a)),c}(t,n,a,c)),r}function y(e){const t=document.createElement("span");return t.classList.add("next-day-forecast__detail-heading"),t.textContent=e,t}function _(e,t){const n=document.createElement("img");return n.classList.add(t),n.alt="Weather icon",n.src=e,n}e.addEventListener("submit",(n=>{n.preventDefault(),m(t.value),e.reset()})),m("Saransk")})();